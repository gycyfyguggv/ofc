workflows:
  unity_ios_unsigned:
    name: Unity iOS Unsigned IPA
    max_build_duration: 60
    environment:
      xcode: latest
    scripts:
      - name: Build Unity iOS project (no signing)
        script: |
          echo "ğŸ”¨ Starting Unity iOS build without signing..."
          # Ø¨Ù†Ø§Ø¡ Ù…Ø´Ø±ÙˆØ¹ iOS Ø¨Ø¯ÙˆÙ† Ø£Ø±Ø´ÙØ©
          xcodebuild \
            -project Unity-iPhone.xcodeproj \
            -scheme Unity-iPhone \
            -configuration Release \
            -sdk iphoneos \
            build

          echo "ğŸ“¦ Packaging IPA..."
          cd build/Release-iphoneos
          mkdir Payload
          cp -r Unity-iPhone.app Payload/
          zip -r UnsignedApp.ipa Payload

          echo "âœ… IPA created at: build/Release-iphoneos/UnsignedApp.ipa"
    artifacts:
      - build/Release-iphoneos/UnsignedApp.ipa
